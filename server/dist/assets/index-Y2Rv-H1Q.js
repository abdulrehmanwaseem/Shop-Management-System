import{j as a,w as C,r as I,F as P,m as R}from"./vendor-CUfTd-uA.js";import{a as E,o as k,D,c as s,C as r,d as O}from"./index-Bm85Lvm9.js";import{D as d}from"./Datatable-D_5FVnZn.js";const o=({title:l,total:e})=>a.jsx("div",{className:"rounded-sm border border-stroke bg-white py-6 px-7.5 shadow-default dark:border-strokedark dark:bg-boxdark",children:a.jsx("div",{className:" flex items-end justify-between",children:a.jsxs("div",{children:[a.jsx("h4",{className:"flex items-center  text-title-md font-bold text-black dark:text-white",children:e}),a.jsx("span",{className:"text-sm font-semibold ",children:l})]})})}),F=E.injectEndpoints({endpoints:l=>({getDashboard:l.mutation({query:e=>({url:"dashboard",method:"POST",body:e}),onQueryStarted:k}),getDashboardTablesData:l.mutation({query:e=>({url:"dashboard/tables",method:"POST",body:e}),onQueryStarted:k})}),overrideExisting:!1}),{useGetDashboardMutation:B,useGetDashboardTablesDataMutation:M}=F,q=[{field:"company",header:"Company Name"},{field:"name",header:"Name"},{field:"stock",header:"Stock"},{field:"lowOnStock",header:"Low On Stock"}],G=[{field:"name",header:"Name"},{field:"remainingAmount",header:"Remaining Amount"},{field:"paymentStatus.name",header:"Payment Status"}],L=[{field:"name",header:"Name"},{field:"remainingAmount",header:"Remaining Amount"},{field:"paymentStatus.name",header:"Payment Status"}],z=[{field:"name",header:"Name"},{field:"remainingAmount",header:"Remaining Amount"},{field:"paymentStatus.name",header:"Payment Status"}],K=()=>{var c,u,h,x,f,b,p,j,g,y,w,v,N,S;const[l,{data:e}]=B(),[T,{data:t}]=M(),i=C({resolver:O}),A=async n=>{await l(n),await T(n)},m=I.useMemo(()=>{var n;return Math.ceil(((n=e==null?void 0:e.data)==null?void 0:n.totalRevenue)*.01)},[(c=e==null?void 0:e.data)==null?void 0:c.totalRevenue]);return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"rounded-sm border shadow-default border-stroke bg-white dark:border-strokedark dark:bg-boxdark p-3 ",children:a.jsx(P,{...i,children:a.jsxs("form",{className:"flex gap-4 items-center",onSubmit:i.handleSubmit(A),children:[a.jsx(D,{mode:"range",name:"dateRange",py:"3"}),a.jsx(R,{label:"Filter",raised:!0,size:"small",className:"w-24",type:"submit"})]})})}),a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-6  gap-6",children:[a.jsx(o,{title:"Total Purchases",total:s.format(((u=e==null?void 0:e.data)==null?void 0:u.totalPurchase.finalAmount)||0)}),a.jsx(o,{title:"Total Sales",total:s.format(((h=e==null?void 0:e.data)==null?void 0:h.totalSale.finalAmount)||0)}),a.jsx(o,{title:"Total Expenses",total:s.format(((x=e==null?void 0:e.data)==null?void 0:x.totalExpense)||0)}),a.jsx(o,{title:"Total Payable",total:s.format(((f=e==null?void 0:e.data)==null?void 0:f.totalPurchase.remainingAmount)||0)}),a.jsx(o,{title:"Total Recievable",total:s.format(((b=e==null?void 0:e.data)==null?void 0:b.totalSale.remainingAmount)||0)}),a.jsx(o,{title:"Total Revenue",total:s.format(((p=e==null?void 0:e.data)==null?void 0:p.totalRevenue)||0)}),a.jsx(o,{title:"Expected Revenue",total:s.format(((j=e==null?void 0:e.data)==null?void 0:j.expectedRevenue)||0)}),a.jsx(o,{title:"Total Inventory",total:s.format(((g=e==null?void 0:e.data)==null?void 0:g.totalInventory)||0)}),a.jsx(o,{title:"Cash in Hand",total:s.format(((y=e==null?void 0:e.data)==null?void 0:y.amountInCash)||0)}),a.jsx(o,{title:"Charity Contribution",total:s.format(m>0?m:0)})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs(r,{className:"space-y-4",children:[a.jsx("p",{className:"font-semibold text-lg",children:"Total Payable Items"}),a.jsx(d,{rows:5,columns:L,data:(w=t==null?void 0:t.data)==null?void 0:w.payableItems,rowActions:!1,addBtn:!1})]}),a.jsxs(r,{className:"space-y-4",children:[a.jsx("p",{className:"font-semibold text-lg",children:"Total Receivable Items"}),a.jsx(d,{rows:5,columns:G,data:(v=t==null?void 0:t.data)==null?void 0:v.recievableItems,rowActions:!1,addBtn:!1})]}),a.jsxs(r,{className:"space-y-4 overflow-auto",children:[a.jsx("p",{className:"font-semibold text-lg",children:"Low On Stock Items"}),a.jsx(d,{rows:5,columns:q,data:(N=t==null?void 0:t.data)==null?void 0:N.lowOnStockItems,rowActions:!1,addBtn:!1})]}),a.jsxs(r,{className:"space-y-4 overflow-auto",children:[a.jsx("p",{className:"font-semibold text-lg",children:"Total Payable Expenses"}),a.jsx(d,{rows:5,columns:z,data:(S=t==null?void 0:t.data)==null?void 0:S.expenseItems,rowActions:!1,addBtn:!1})]})]})]})]})};export{K as default};
